# ğŸ–¥ï¸ æœ¬åœ°å®šæ—¶ä»»åŠ¡è®¾ç½®æŒ‡å—

## ğŸ“Œ æ–¹æ¡ˆå¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°å®šæ—¶ä»»åŠ¡ | GitHub Actions |
|------|-------------|----------------|
| ğŸ›ï¸ æ§åˆ¶æƒ | å®Œå…¨æŒæ§ | æœ‰é™ |
| ğŸ›¡ï¸ å†²çªé£é™© | æ— é£é™© | å¯èƒ½è¦†ç›–ä¸»é¢˜ |
| ğŸ’° æˆæœ¬ | å…è´¹ | å…è´¹ |
| ğŸ“± é€šçŸ¥ | ç³»ç»Ÿé€šçŸ¥ | éœ€è¦é¢å¤–é…ç½® |
| ğŸ” è°ƒè¯• | æœ¬åœ°æ—¥å¿— | è¿œç¨‹æ—¥å¿— |
| â° çµæ´»æ€§ | éšæ—¶ä¿®æ”¹ | éœ€è¦pushä»£ç  |
| ğŸ’» è¦æ±‚ | ç”µè„‘éœ€å¼€æœº | æ— è¦æ±‚ |

**æ¨èï¼šæœ¬åœ°å®šæ—¶ä»»åŠ¡** âœ…

---

## ğŸš€ å¿«é€Ÿå®‰è£…

### 1. ä¸€é”®å®‰è£…

```bash
cd /Users/apple/legal-daily-news-skill
./setup_local_cron.sh
```

### 2. éªŒè¯å®‰è£…

```bash
# æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€
launchctl list | grep legalnews
```

åº”è¯¥çœ‹åˆ°ï¼š
```
com.legalnews.daily
```

---

## ğŸ“‹ å·¥ä½œåŸç†

### å®šæ—¶ä»»åŠ¡ä¿¡æ¯

```
è¿è¡Œæ—¶é—´ï¼šæ¯å¤©æ—©ä¸Š 8:05
è¿è¡Œè„šæœ¬ï¼šscripts/auto_generate_and_push.sh
æ—¥å¿—ä½ç½®ï¼šlogs/auto-YYYYMMDD.log
```

### è‡ªåŠ¨æµç¨‹

```
8:05 AM â†’ launchdè§¦å‘
    â†“
1. æ£€æŸ¥ä»Šæ—¥ç®€æŠ¥æ˜¯å¦å­˜åœ¨
    â†“
2. ç”Ÿæˆç®€æŠ¥ï¼ˆå¸¦å»é‡ï¼‰
    â†“
3. è½¬æ¢ä¸ºç´«è‰²ä¸»é¢˜HTML
    â†“
4. æ£€æŸ¥ä¸»é¢˜æ˜¯å¦æ­£ç¡®
    â†“
5. æäº¤åˆ°Git
    â†“
6. æ¨é€åˆ°GitHub
    â†“
7. å‘é€ç³»ç»Ÿé€šçŸ¥
```

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### æŸ¥çœ‹ä»Šæ—¥æ—¥å¿—

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/auto-$(date +%Y%m%d).log

# æŸ¥çœ‹å®Œæ•´æ—¥å¿—
cat logs/auto-$(date +%Y%m%d).log
```

### æ‰‹åŠ¨æµ‹è¯•

```bash
# è¿è¡Œä¸€æ¬¡å®Œæ•´æµç¨‹
./scripts/auto_generate_and_push.sh
```

### æš‚åœ/æ¢å¤ä»»åŠ¡

```bash
# å¸è½½ä»»åŠ¡ï¼ˆåœæ­¢ï¼‰
launchctl unload ~/Library/LaunchAgents/com.legalnews.daily.plist

# é‡æ–°åŠ è½½ä»»åŠ¡ï¼ˆæ¢å¤ï¼‰
launchctl load ~/Library/LaunchAgents/com.legalnews.daily.plist
```

### ä¿®æ”¹è¿è¡Œæ—¶é—´

ç¼–è¾‘ `com.legalnews.daily.plist` æ–‡ä»¶ï¼š

```xml
<!-- æ”¹ä¸ºæ—©ä¸Š9ç‚¹ -->
<key>StartHour</key>
<integer>9</integer>

<!-- æ”¹ä¸º10åˆ† -->
<key>StartMinute</key>
<integer>10</integer>
```

ç„¶åé‡æ–°åŠ è½½ï¼š
```bash
launchctl unload ~/Library/LaunchAgents/com.legalnews.daily.plist
launchctl load ~/Library/LaunchAgents/com.legalnews.daily.plist
```

---

## âš ï¸ é‡è¦æç¤º

### 1. ç”µè„‘å¿…é¡»å¼€æœº

å®šæ—¶ä»»åŠ¡ä¼šåœ¨**æ¯å¤©æ—©ä¸Š8:05**è¿è¡Œï¼Œä½†è¦æ±‚ï¼š
- âœ… ç”µè„‘å·²å¼€æœº
- âœ… å·²ç™»å½•ç”¨æˆ·è´¦å·

å¦‚æœç”µè„‘å…³æœºæˆ–ä¼‘çœ ï¼Œä»»åŠ¡ä¼šåœ¨ä¸‹æ¬¡å¼€æœºæ—¶ç«‹å³è¿è¡Œã€‚

### 2. è‡ªåŠ¨è·³è¿‡å·²ç”Ÿæˆçš„ç®€æŠ¥

å¦‚æœæ£€æµ‹åˆ° `output/archive/2026-01-26.md` å·²å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨è·³è¿‡ç”Ÿæˆã€‚

è¿™æ ·ä½ å¯ä»¥ï¼š
- æ‰‹åŠ¨æå‰ç”Ÿæˆ
- å¤šæ¬¡è¿è¡Œä¸ä¼šé‡å¤

### 3. ä½¿ç”¨å®‰å…¨æ¨é€

è‡ªåŠ¨è„šæœ¬ä½¿ç”¨ `safe_push.sh`ï¼Œä¼šæ£€æŸ¥ç´«è‰²ä¸»é¢˜ï¼Œé˜²æ­¢æ¨é€é”™è¯¯æ–‡ä»¶ã€‚

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šä»»åŠ¡æ²¡æœ‰è¿è¡Œ

**æ£€æŸ¥æ­¥éª¤ï¼š**
```bash
# 1. æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€
launchctl list | grep legalnews

# 2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
cat logs/cron-error.log

# 3. æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
log show --predicate 'eventLabel == "com.legalnews.daily"' --last 1h
```

**è§£å†³æ–¹æ³•ï¼š**
```bash
# é‡æ–°åŠ è½½ä»»åŠ¡
launchctl unload ~/Library/LaunchAgents/com.legalnews.daily.plist
launchctl load ~/Library/LaunchAgents/com.legalnews.daily.plist
```

### é—®é¢˜2ï¼šæ¨é€å¤±è´¥

**å¯èƒ½åŸå› ï¼š**
- ç½‘ç»œé—®é¢˜
- GitHubå¯†é’¥å¤±æ•ˆ
- ä¸»é¢˜æ£€æŸ¥ä¸é€šè¿‡

**æ£€æŸ¥æ–¹æ³•ï¼š**
```bash
# æŸ¥çœ‹æ—¥å¿—
tail -50 logs/auto-$(date +%Y%m%d).log

# æ‰‹åŠ¨æµ‹è¯•æ¨é€
git push origin main
```

### é—®é¢˜3ï¼šç”Ÿæˆçš„ä¸æ˜¯ç´«è‰²ä¸»é¢˜

**æ£€æŸ¥md_to_purple_html.pyè„šæœ¬æ˜¯å¦å­˜åœ¨ï¼š**
```bash
ls -la scripts/md_to_purple_html.py
```

**æ‰‹åŠ¨è½¬æ¢ï¼š**
```bash
python3 scripts/md_to_purple_html.py output/archive/2026-01-26.md > 2026-01-26.html
```

---

## ğŸ“± ç³»ç»Ÿé€šçŸ¥

è„šæœ¬ä¼šåœ¨å®Œæˆåå‘é€macOSç³»ç»Ÿé€šçŸ¥ï¼š

- âœ… **ç”ŸæˆæˆåŠŸ** - "âœ… ç”ŸæˆæˆåŠŸ"
- âŒ **æ¨é€å¤±è´¥** - "âŒ æ¨é€å¤±è´¥"

é€šçŸ¥ä¼šåœ¨å³ä¸Šè§’æ˜¾ç¤ºï¼Œç‚¹å‡»å¯ä»¥æŸ¥çœ‹è¯¦æƒ…ã€‚

---

## ğŸ”„ ä»GitHub Actionsè¿ç§»

### ç¦ç”¨GitHub Actionsï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³å®Œå…¨ä½¿ç”¨æœ¬åœ°å®šæ—¶ä»»åŠ¡ï¼Œå¯ä»¥ç¦ç”¨GitHub Actionsï¼š

```bash
# ç¼–è¾‘å·¥ä½œæµæ–‡ä»¶
vim .github/workflows/daily-auto.yml

# æ³¨é‡Šæ‰scheduleéƒ¨åˆ†ï¼ˆç¬¬5-6è¡Œï¼‰
# schedule:
#   - cron: '0 0 * * *'

# æäº¤ä¿®æ”¹
git add .github/workflows/daily-auto.yml
git commit -m "Disable: ç¦ç”¨GitHub Actionsè‡ªåŠ¨è¿è¡Œï¼Œæ”¹ç”¨æœ¬åœ°å®šæ—¶ä»»åŠ¡"
git push
```

---

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### æŸ¥çœ‹æœ€è¿‘7å¤©çš„æ—¥å¿—

```bash
for i in {0..6}; do
    day=$(date -v-${i}d +%Y%m%d)
    log="logs/auto-${day}.log"
    if [ -f "$log" ]; then
        echo "=== $log ==="
        tail -5 "$log"
    fi
done
```

### æ¸…ç†æ—§æ—¥å¿—ï¼ˆä¿ç•™30å¤©ï¼‰

æ—¥å¿—ä¼šè‡ªåŠ¨æ¸…ç†ï¼Œæˆ–æ‰‹åŠ¨è¿è¡Œï¼š
```bash
find logs -name "auto-*.log" -mtime +30 -delete
```

---

## ğŸ’¡ é«˜çº§ç”¨æ³•

### 1. å¤šä¸ªæ—¶é—´ç‚¹è¿è¡Œ

å¦‚æœæƒ³åœ¨æ—©ä¸Š8ç‚¹å’Œä¸‹åˆ6ç‚¹éƒ½è¿è¡Œï¼š

```bash
cp com.legalnews.daily.plist com.legalnews.daily.8am.plist
cp com.legalnews.daily.plist com.legalnews.daily.6pm.plist

# ç¼–è¾‘6pmçš„plistï¼Œä¿®æ”¹StartHourä¸º18
# ç„¶ååˆ†åˆ«åŠ è½½ä¸¤ä¸ªä»»åŠ¡
```

### 2. æ¡ä»¶è¿è¡Œï¼ˆåªåœ¨å·¥ä½œæ—¥ï¼‰

åœ¨è„šæœ¬å¼€å¤´æ·»åŠ ï¼š
```bash
# æ£€æŸ¥æ˜¯å¦æ˜¯å·¥ä½œæ—¥ï¼ˆå‘¨ä¸€åˆ°å‘¨äº”ï¼‰
DAY_OF_WEEK=$(date +%u)  # 1=å‘¨ä¸€, 7=å‘¨æ—¥
if [ $DAY_OF_WEEK -gt 5 ]; then
    echo "ä»Šå¤©æ˜¯å‘¨æœ«ï¼Œè·³è¿‡ç”Ÿæˆ"
    exit 0
fi
```

### 3. å¤±è´¥é‡è¯•

å¦‚æœæ¨é€å¤±è´¥ï¼Œ1å°æ—¶åé‡è¯•ï¼š
```bash
# åœ¨è„šæœ¬æœ€åæ·»åŠ é‡è¯•é€»è¾‘
if [ $exit_code -ne 0 ]; then
    echo "âŒ æ¨é€å¤±è´¥ï¼Œ1å°æ—¶åé‡è¯•..."
    sleep 3600
    git push origin main
fi
```

---

## ğŸ¯ æ¨èé…ç½®

**æœ€ä½³å®è·µï¼š**

1. âœ… ä½¿ç”¨æœ¬åœ°å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©8:05ï¼‰
2. âœ… ç¦ç”¨GitHub Actionsçš„schedule
3. âœ… ä¿ç•™æ‰‹åŠ¨è§¦å‘åŠŸèƒ½ï¼ˆworkflow_dispatchï¼‰
4. âœ… å®šæœŸæ£€æŸ¥æ—¥å¿—ï¼ˆæ¯å‘¨ä¸€æ¬¡ï¼‰

**è¿™æ ·ä½ å°†è·å¾—ï¼š**
- ğŸ›ï¸ å®Œå…¨çš„æ§åˆ¶æƒ
- ğŸ›¡ï¸ æ— å†²çªé£é™©
- ğŸ“± ç³»ç»Ÿé€šçŸ¥æé†’
- ğŸ” æœ¬åœ°æ—¥å¿—è°ƒè¯•
- ğŸ’ª æ‰‹åŠ¨å¤‡ä»½èƒ½åŠ›
